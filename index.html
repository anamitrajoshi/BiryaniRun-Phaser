<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biryani Run</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
        }
    </style>
</head>
<body>
    <script>
        let player, cursors, biryanis, bay_leafs, score = 0, scoreText, lives = 5, livesText;
        let baseVelocity = -200;
        let velocityMultiplier = 1;
        let gameOver = false;
        let biryaniSpawnEvent, bay_leafSpawnEvent;
        let restartButton;

        const config = {
            type: Phaser.AUTO,
            width: window.innerWidth,
            height: window.innerHeight,
            physics: {
                default: 'arcade',
<<<<<<< Updated upstream
                arcade: {
                    gravity: { y: 0 },
                    debug: false
=======
                arcade: { 
                    gravity: { y: 0 }, 
                    debug: false 
>>>>>>> Stashed changes
                }
            },
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

<<<<<<< Updated upstream
=======
        let player, cursors, biryanis, bay_leafs, score = 0, scoreText, lives = 5, livesText;
        let velocityMultiplier = 1;
        let gameOver = false;
        let restartButton;

>>>>>>> Stashed changes
        const game = new Phaser.Game(config);

        function preload() {
            this.load.image('road', 'assets/road.png');
            this.load.image('player', 'assets/character.png');
            this.load.image('biryani', 'assets/biryani.png');
            this.load.image('bay_leaf', 'assets/bay_leaf.png');
<<<<<<< Updated upstream
            this.load.image('restartButton', 'assets/restartButton.png');
            this.load.image('startButton','assets/startButton.png');
        }

        function create() {
            if (!gameOver) {
                createStartScreen.call(this);
            }
        }

        function createStartScreen() {
            // Create start screen elements
            const titleStyle = {
                fontSize: '64px',
                fontFamily: 'Arial',
                color: '#FFD700',
                stroke: '#000000',
                strokeThickness: 6
            };

            const title = this.add.text(config.width / 2, config.height / 3, 'Biryani Run', titleStyle)
                .setOrigin(0.5);
            
            const startButton = this.add.image(config.width / 2, config.height * 0.6, 'startButton')
                .setOrigin(0.5)
                .setInteractive()
                .on('pointerdown', () => {
                    console.log('Start Button Clicked');
                    // Add your logic to start the game
                    title.destroy();
                    startButton.destroy();
                    createGameElements.call(this);
                });

            // Optionally, add hover effects
            startButton.on('pointerover', () => {
                startButton.setScale(1.1); // Slightly increase size
            });

            startButton.on('pointerout', () => {
                startButton.setScale(1); // Reset size
            });
        }
        //     const startButton = this.add.text(config.width / 2, config.height * 0.6, 'Start Game', {
        //         fontSize: '32px',
        //         fontFamily: 'Arial',
        //         color: '#ffffff',
        //         backgroundColor: '#4CAF50',
        //         padding: { x: 20, y: 10 }
        //     }).setOrigin(0.5)
        //       .setInteractive();

        //     startButton.on('pointerover', () => startButton.setScale(1.1));
        //     startButton.on('pointerout', () => startButton.setScale(1));
        //     startButton.on('pointerdown', () => {
        //         title.destroy();
        //         startButton.destroy();
        //         createGameElements.call(this);
        //     });
        // }

        function createGameElements() {
            // Set the road background
            this.road = this.add.tileSprite(config.width / 2, config.height / 2, config.width, config.height * 1.5, 'road');
            
            // Create the player
            player = this.physics.add.sprite(100, config.height / 2, 'player');
            player.setCollideWorldBounds(true);
            player.setScale(0.3);

            // Setup keyboard controls
            cursors = this.input.keyboard.createCursorKeys();

            // Create groups
            biryanis = this.physics.add.group();
            bay_leafs = this.physics.add.group();

            // Setup spawn events
            biryaniSpawnEvent = this.time.addEvent({
                delay: 1000,
                callback: spawnBiryani,
                callbackScope: this,
                loop: true
            });

            bay_leafSpawnEvent = this.time.addEvent({
                delay: 1500,
                callback: spawnbay_leaf,
                callbackScope: this,
                loop: true
            });

            // Setup score and lives display
            score = 0;
            lives = 5;
            scoreText = this.add.text(10, 10, 'Score: 0', { fontSize: '20px', fill: '#fff' });
            livesText = this.add.text(10, 40, 'Lives: 5', { fontSize: '20px', fill: '#fff' });

            // Setup collisions
            this.physics.add.overlap(player, biryanis, collectBiryani, null, this);
            this.physics.add.overlap(player, bay_leafs, hitbay_leaf, null, this);

            gameOver = false;
        }

        function update() {
            if (!player || gameOver) return;

            // Scroll the road
            if (this.road) {
                this.road.tilePositionX += 4;
            }

            // Player movement
=======
            this.load.image('restart', 'assets/restart.png');
            this.load.image('coke', 'assets/coke.png');
            this.load.image('kebab', 'assets/kebab.png');
        }

        function create() {
            this.road = this.add.tileSprite(config.width / 2, config.height / 2, config.width, config.height * 1.5, 'road');

            player = this.physics.add.sprite(100, config.height / 2, 'player');
            player.setCollideWorldBounds(true);
            player.setScale(0.3);
            player.immune = false;
            player.scoreMultiplier = 1; 

            cursors = this.input.keyboard.createCursorKeys();

            biryanis = this.physics.add.group();
            bay_leafs = this.physics.add.group();
            this.coke = this.physics.add.group();
            this.kebab = this.physics.add.group();

            // Spawn biryanis
            this.time.addEvent({
                delay: 1000,
                callback: spawnBiryani,
                callbackScope: this,
                loop: true
            });

            // Spawn bay_leafs
            this.time.addEvent({
                delay: 1500,
                callback: spawnbay_leaf,
                callbackScope: this,
                loop: true
            });

            // Spawn coke power-up (immunity)
            this.time.addEvent({
                delay: 10000,
                callback: () => {
                    let coke = this.coke.create(50, 0, 'coke').setScale(0.5);
                    coke.setVelocityY(50);
                    coke.setVelocityX(20);
                },
                loop: true
            });

            // Spawn kebab power-up (score multiplier)
            this.time.addEvent({
                delay: 15000,
                callback: () => {
                    let kebab = this.kebab.create(50, 0, 'kebab').setScale(0.5);
                    kebab.setVelocityY(50);
                    kebab.setVelocityX(-20);
                },
                loop: true
            });

            scoreText = this.add.text(10, 10, 'Score: 0', { fontSize: '20px', fill: '#fff' });
            livesText = this.add.text(10, 40, 'Lives: 5', { fontSize: '20px', fill: '#fff' });

            this.physics.add.overlap(player, biryanis, collectBiryani, null, this);
            this.physics.add.overlap(player, bay_leafs, hitbay_leaf, null, this);
            this.physics.add.overlap(player, this.coke, collectCoke, null, this);
            this.physics.add.overlap(player, this.kebab, collectKebab, null, this);
        }

        function update() {
            if (gameOver) return;

            this.road.tilePositionX += 4;

>>>>>>> Stashed changes
            if (cursors.up.isDown) {
                player.setVelocityY(-200);
            } else if (cursors.down.isDown) {
                player.setVelocityY(200);
            } else {
                player.setVelocityY(0);
            }
<<<<<<< Updated upstream

            // Clean up off-screen objects
            if (biryanis) {
                biryanis.getChildren().forEach(biryani => {
                    if (biryani.x < -50) biryani.destroy();
                });
            }
            if (bay_leafs) {
                bay_leafs.getChildren().forEach(bay_leaf => {
                    if (bay_leaf.x < -50) bay_leaf.destroy();
                });
            }
=======
>>>>>>> Stashed changes
        }

        function spawnBiryani() {
            let biryani = biryanis.create(config.width, Phaser.Math.Between(50, config.height - 50), 'biryani');
            biryani.setVelocityX(-200 * velocityMultiplier);
            biryani.setScale(0.3);
        }

        function spawnbay_leaf() {
            let bay_leaf = bay_leafs.create(config.width, Phaser.Math.Between(50, config.height - 50), 'bay_leaf');
            bay_leaf.setVelocityX(-200 * velocityMultiplier);
            bay_leaf.setScale(0.3);
        }

        function collectBiryani(player, biryani) {
            biryani.destroy();
            updateScore(10);
        }
        function hitbay_leaf(player, bay_leaf) {
            bay_leaf.destroy();
            if (!player.immune) {
                lives--;
                livesText.setText('Lives: ' + lives);
<<<<<<< Updated upstream

                if (lives === 0) {
                    gameOver = true;
                    this.physics.pause(); // Pause physics
                    this.time.removeAllEvents(); // Stop all timers (biryanis and bay_leafs)
                    
                    // Display "Game Over!" text
                    this.add.text(config.width / 2, config.height / 2 - 50, 'Game Over!', {
                    fontSize: '40px',
                    fill: '#fff'
                }).setOrigin(0.5);

                const restartButton = this.add.image(config.width / 2, config.height * 0.7, 'restartButton')
                    .setOrigin(0.5)
                    .setInteractive();

                restartButton.on('pointerdown', () => {
                    location.reload();
                });
                }}
            }
        // function hitbay_leaf(player, bay_leaf) {
        //     bay_leaf.destroy();
        //     lives--;
        //     livesText.setText('Lives: ' + lives);

        //     if (lives <= 0) {
        //         gameOver = true;
        //         this.physics.pause();

        //         if (biryaniSpawnEvent) biryaniSpawnEvent.remove();
        //         if (bay_leafSpawnEvent) bay_leafSpawnEvent.remove();

        //         this.add.text(config.width / 2, config.height / 2 - 50, 'Game Over!', {
        //             fontSize: '40px',
        //             fill: '#fff'
        //         }).setOrigin(0.5);

        //         const restartButton = this.add.text(config.width / 2, config.height / 2 + 50, 'Restart', {
        //             fontSize: '32px',
        //             fill: '#fff',
        //             backgroundColor: '#4CAF50',
        //             padding: { x: 20, y: 10 }
        //         }).setOrigin(0.5)
        //           .setInteractive();

        //         restartButton.on('pointerdown', () => {
        //             location.reload();
        //         });
        //      }
        //  }
=======
                if (lives === 0) endGame.call(this);
            }
        }

        function collectCoke(player, coke) {
            coke.destroy();
            player.immune = true;
            player.setTint(0xff0000);

            this.time.delayedCall(5000, () => {
                player.immune = false;
                player.clearTint();
            });
        }

        function collectKebab(player, kebab) {
            kebab.destroy();
            player.scoreMultiplier = 2;

            this.time.delayedCall(10000, () => {
                player.scoreMultiplier = 1;
            });
        }

        function updateScore(points) {
            score += points * player.scoreMultiplier;
            scoreText.setText('Score: ' + score);
        }

        function endGame() {
            gameOver = true;
            this.physics.pause();
            this.time.removeAllEvents();

            this.add.text(config.width / 2, config.height / 2 - 50, 'Game Over!', 
                { fontSize: '40px', fill: '#fff' }).setOrigin(0.5);

            restartButton = this.add.image(config.width / 2, config.height / 2 + 50, 'restart')
                .setInteractive()
                .on('pointerdown', () => this.scene.restart());
        }
>>>>>>> Stashed changes
    </script>
</body>
</html>
